"mix.bqn takes a single option namespace, or no arguments" ! 1â‰¥â‰ â€¢args
o â† â‰ â—¶âŸ¨â€¢Importâˆ˜"options.bqn", âŠ‘âŸ© â€¢args

# List of length |ğ•© that starts at 0 and stops just before 1,
# reversed if ğ•©<0.
I â‡ <âŸœ0 âŒ½âˆ˜âŠ¢âŸâŠ£ â†•âˆ˜|âŠ¸Ã·

# Add two signals ğ•¨ and ğ•© or a list of signals ğ•©,
# extending to the length of the longest signal.
Add â‡ +Â´ Â·(âŒˆÂ´(Â¯1âŠ‘â‰¢)Â¨)âŠ¸(â†‘â‰1Â¨) âŠ¢âŠ˜(â‰â—‹<)
# Like add, but concatenate instead.
Concat â‡ (âˆ¾ â†“Â¨ËœâŸœ(<0â¥ŠËœÂ·âŒˆÂ´=Â¨)) âŠ˜ (âˆ¾â‰1)
# Like âŒ½â‰1, but the end of the signal does not wrap around.
Shift â‡ <âŸœ0â—¶âŸ¨â†“â‰1 , (-â¥Š0Ë™)âŠ¸(âˆ¾â‰1)âŸ©
# Repeat signal ğ•© ğ•¨ times.
Rep â‡ (â¥Š/âŸœâ‰)â‰1
# ğ•¨ is locationâ€¿length. Obtain that part of signal ğ•©.
Slice â‡ (SliceI â† +âŸœ(0âŠ¸âŒŠ+â†•âˆ˜|)Â´) âŠâ‰1 âŠ¢
# Apply ğ”½ to the slice of ğ•© given by ğ•¨.
_onSlice â‡ { ğ”½âŒ¾((SliceIğ•¨)âŠâ‰1âŠ¢) ğ•© }

# Convert possibly-mono signal to stereo
Stereo â‡ â‰ËœâŸ(2>=)
# Pan signal ğ•© to position ğ•¨, where 0 is hard left and 1 is hard right
Pan â‡ (25âŒŠâˆ˜Ã—â‰âŸœÂ¬âˆ˜âŠ£) â¥ŠâŸœ0âŠ¸Â»Ë˜ ((=âŒœËœâ†•2)-Â·(Ã—Ã—âŒœ0âŠ¸âŒˆ)Â·â‰âŸœ-1-Ëœ2Ã—âŠ£)âŠ¸(+Ëâˆ˜Ã—â‰Â¯1â€¿âˆ)âŸœStereo

# Multiply leading or trailing samples of ğ•© by ğ•¨.
Fadefrontâ€¿Fadeback â‡ {ğ•Šf: {ğ•¨âŠ¸Ã—âŒ¾((Fâ‰ ğ•¨)â†‘âŠ¢)ğ•©}â‰1 }Â¨ âŠ¢â€¿-

# ğ•— is the overlap amount. Fade ğ•¨ into ğ•©, linearly.
_crossfade â‡ {
  Gâ†â†‘â‰â—‹<â†“
  (-ğ•—)âŠ¸GâŠ¸(âˆ¾ 1âŒ½âˆ¾Ëœâ—‹(1âŠ¸â†“) âˆ¾âŸœ< (Â¬âŠ¸â‰Iğ•—)+Ëâˆ˜Ã—â‰â—‹âŠ‘)âŸœ(ğ•—âŠ¸G)â‰1
}
