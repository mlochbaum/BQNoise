# FFTW-based replacement for fft.bqn

plan â† "*:i32"

Fn â† "/usr/lib/libfftw3.so.3"âŠ¸â€¢FFI
createPlan  â† Fn planâ€¿"fftw_plan_dft"â€¿"i32"â€¿"*i32"â€¿"*f64"â€¿"&f64"â€¿"i32"â€¿"i32"
destroyPlan â† Fn ""â€¿"fftw_destroy_plan"â€¿plan
executePlan â† Fn ""â€¿"fftw_execute"â€¿plan

{
  ğ•¨ğ•Šâ¼ğ•©: (-ğ•¨1âŠ˜â‰¢Â¯1)ğ•Šğ•© ;

  "FFT argument must be a list or have two list cells" ! (3âŒŠ=)â—¶âŸ¨0,1,2=â‰ ,0âŸ©ğ•©
  Enc â† â‰âŒ½
  ğ•© â†© (2â†‘â‰)âŸ(2>=) ğ•©
  dir â† -âŸœÂ¬ ğ•¨â‰¡Â¯1
  sh â† 1â†“â‰¢ğ•©
  in â† â¥Š Enc ğ•©
  planâ€¿out â† CreatePlan âŸ¨â‰ sh,sh,in,0Â¨in,dir,2â‹†6âŸ©
  ExecutePlan âŸ¨planâŸ©
  DestroyPlan âŸ¨planâŸ©
  Ã·âŸœ(Ã—Â´shË™)âŸ(1=dir) Encâ¼ (shâˆ¾2) â¥Š out
}
